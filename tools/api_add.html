<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jembatan API Interaktif</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100%;
      overflow-x: hidden;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .scene {
      position: relative;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 60px 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      margin-bottom: 30px;
    }

    .title {
      text-align: center;
      font-size: 36px;
      font-weight: 800;
      color: #2d3748;
      margin-bottom: 50px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .main-bridge-container {
      position: relative;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 80px;
      min-height: 400px;
    }

    .island {
      width: 280px;
      height: 200px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      position: relative;
      z-index: 10;
    }

    .island-title {
      font-size: 18px;
      font-weight: 700;
      color: #ffffff;
      text-align: center;
      margin-bottom: 8px;
    }

    .island-subtitle {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.9);
      text-align: center;
    }

    .bridge {
      position: absolute;
      left: 280px;
      right: 280px;
      top: 50%;
      transform: translateY(-50%);
      height: 12px;
      background: linear-gradient(90deg, #4299e1 0%, #48bb78 50%, #ed8936 100%);
      border-radius: 6px;
      box-shadow: 0 4px 15px rgba(66, 153, 225, 0.4);
      z-index: 5;
    }

    .bridge::before,
    .bridge::after {
      content: '';
      position: absolute;
      width: 4px;
      height: 60px;
      background: linear-gradient(180deg, #667eea 0%, transparent 100%);
      top: -60px;
    }

    .bridge::before {
      left: 10%;
    }

    .bridge::after {
      right: 10%;
    }

    .data-packet {
      position: absolute;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      top: 50%;
      transform: translateY(-50%);
      box-shadow: 0 0 20px currentColor;
      animation: travel 4s linear infinite;
      z-index: 6;
    }

    .data-packet.get {
      background: #4299e1;
      color: #4299e1;
      animation-delay: 0s;
    }

    .data-packet.post {
      background: #48bb78;
      color: #48bb78;
      animation-delay: 1s;
    }

    .data-packet.put {
      background: #ecc94b;
      color: #ecc94b;
      animation-delay: 2s;
    }

    .data-packet.delete {
      background: #f56565;
      color: #f56565;
      animation-delay: 3s;
    }

    @keyframes travel {
      0% {
        left: 0;
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      90% {
        opacity: 1;
      }
      100% {
        left: 100%;
        opacity: 0;
      }
    }

    .info-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: -180px;
      position: relative;
      z-index: 8;
      padding: 0 40px;
    }

    .info-card {
      background: #ffffff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      border-left: 4px solid #667eea;
    }

    .info-card-title {
      font-size: 13px;
      font-weight: 700;
      color: #667eea;
      margin-bottom: 10px;
      text-transform: uppercase;
    }

    .info-card-content {
      font-size: 14px;
      color: #4a5568;
      line-height: 1.6;
    }

    .method-tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      margin-right: 6px;
      margin-bottom: 6px;
    }

    .method-tag.get { background: #bee3f8; color: #2c5282; }
    .method-tag.post { background: #c6f6d5; color: #22543d; }
    .method-tag.put { background: #feebc8; color: #7c2d12; }
    .method-tag.delete { background: #fed7d7; color: #742a2a; }

    .request-response {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-top: 60px;
      margin-bottom: 60px;
    }

    .code-card {
      background: #2d3748;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .code-header {
      font-size: 14px;
      font-weight: 700;
      color: #4299e1;
      margin-bottom: 16px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .code-content {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      color: #e2e8f0;
      line-height: 1.8;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .code-key {
      color: #ed8936;
    }

    .code-value {
      color: #48bb78;
    }

    .code-string {
      color: #f6e05e;
    }

    .cors-section {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
      border-radius: 16px;
      padding: 40px;
      margin-top: 40px;
    }

    .cors-title {
      font-size: 28px;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 30px;
      text-align: center;
    }

    .cors-bridge-container {
      position: relative;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 40px;
      min-height: 180px;
    }

    .cors-island {
      width: 220px;
      height: 120px;
      background: #ffffff;
      border: 3px solid #667eea;
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
      position: relative;
      z-index: 10;
    }

    .cors-label {
      font-size: 12px;
      font-weight: 700;
      color: #667eea;
      margin-bottom: 8px;
      text-transform: uppercase;
    }

    .cors-url {
      font-size: 13px;
      color: #4a5568;
      font-family: 'Courier New', monospace;
      text-align: center;
      word-break: break-all;
    }

    .cors-bridge {
      position: absolute;
      left: 220px;
      right: 220px;
      top: 50%;
      transform: translateY(-50%);
      height: 8px;
      background: repeating-linear-gradient(
        90deg,
        #cbd5e0 0px,
        #cbd5e0 10px,
        transparent 10px,
        transparent 20px
      );
      border-radius: 4px;
      opacity: 0.5;
      z-index: 5;
      animation: corsGlow 3s ease-in-out infinite;
    }

    @keyframes corsGlow {
      0%, 100% {
        opacity: 0.5;
        box-shadow: none;
      }
      50% {
        opacity: 1;
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.6);
      }
    }

    .preflight-shield {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 60px;
      height: 60px;
      background: #ffffff;
      border: 3px solid #48bb78;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 30px;
      box-shadow: 0 4px 12px rgba(72, 187, 120, 0.3);
      z-index: 11;
      animation: shieldPulse 2s ease-in-out infinite;
    }

    @keyframes shieldPulse {
      0%, 100% {
        transform: translate(-50%, -50%) scale(1);
      }
      50% {
        transform: translate(-50%, -50%) scale(1.1);
      }
    }

    .security-headers {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-top: 30px;
    }

    .security-badge {
      background: #ffffff;
      border: 2px solid #667eea;
      border-radius: 20px;
      padding: 10px 20px;
      font-size: 13px;
      font-weight: 600;
      color: #667eea;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
      animation: float 3s ease-in-out infinite;
    }

    .security-badge:nth-child(2) {
      animation-delay: 0.5s;
    }

    .security-badge:nth-child(3) {
      animation-delay: 1s;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }

    .legend {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 40px;
      flex-wrap: wrap;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .legend-dot {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      box-shadow: 0 0 10px currentColor;
    }

    .legend-text {
      font-size: 14px;
      font-weight: 600;
      color: #4a5568;
    }

    /* Game Styles */
    .game-section {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      margin-bottom: 30px;
    }

    .game-title {
      text-align: center;
      font-size: 32px;
      font-weight: 800;
      color: #2d3748;
      margin-bottom: 20px;
    }

    .game-instruction {
      text-align: center;
      font-size: 16px;
      color: #4a5568;
      margin-bottom: 30px;
    }

    .game-stats {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .stat-box {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 20px 40px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .stat-label {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 8px;
      font-weight: 600;
    }

    .stat-value {
      font-size: 36px;
      color: #ffffff;
      font-weight: 800;
    }

    .game-area {
      position: relative;
      height: 400px;
      background: linear-gradient(180deg, #87ceeb 0%, #98d8c8 100%);
      border-radius: 16px;
      overflow: hidden;
    }

    .game-building {
      position: absolute;
      bottom: 0;
      width: 200px;
      height: 180px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      padding: 20px;
      z-index: 10;
    }

    .game-building.left {
      right: 20px;
    }

    .game-building.right {
      left: 20px;
    }

    .building-structure {
      width: 100%;
      height: 120px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px 12px 0 0;
      position: relative;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 10px;
    }

    .building-structure.indomaret {
      background: linear-gradient(135deg, #ed1c24 0%, #c8102e 100%);
    }

    .building-windows {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-bottom: 10px;
    }

    .building-window {
      width: 20px;
      height: 20px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
    }

    .building-label {
      font-size: 11px;
      font-weight: 800;
      color: #ffffff;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-top: 8px;
    }

    .game-bridge {
      position: absolute;
      left: 220px;
      right: 220px;
      bottom: 60px;
      height: 12px;
      background: linear-gradient(90deg, #8b7355 0%, #a0826d 50%, #8b7355 100%);
      border-radius: 6px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 5;
    }

    .bridge-rail {
      position: absolute;
      width: 100%;
      height: 3px;
      background: #6b5845;
      top: -8px;
      border-radius: 2px;
    }

    .bridge-rail::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 3px;
      background: #6b5845;
      top: 16px;
      border-radius: 2px;
    }

    .security-guard {
      position: absolute;
      left: 50%;
      bottom: 72px;
      transform: translateX(-50%);
      font-size: 60px;
      z-index: 15;
      animation: guardWave 2s ease-in-out infinite;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
    }

    @keyframes guardWave {
      0%, 100% {
        transform: translateX(-50%) rotate(-5deg);
      }
      50% {
        transform: translateX(-50%) rotate(5deg);
      }
    }

    .game-person {
      position: absolute;
      font-size: 40px;
      z-index: 12;
      transition: all 0.3s ease;
      cursor: pointer;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
      animation: personWalk 0.5s steps(2) infinite;
    }

    @keyframes personWalk {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-3px);
      }
    }

    .game-person:hover {
      transform: scale(1.2);
    }

    .game-person.blocked {
      animation: personBlocked 0.5s ease;
    }

    @keyframes personBlocked {
      0%, 100% {
        transform: translateX(0);
      }
      25% {
        transform: translateX(-10px);
      }
      75% {
        transform: translateX(10px);
      }
    }

    .token-badge {
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      background: #48bb78;
      color: white;
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 10px;
      font-weight: 700;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .token-badge.no-token {
      background: #f56565;
    }

    .game-controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
    }

    .game-button {
      padding: 16px 40px;
      font-size: 16px;
      font-weight: 700;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .game-button.start {
      background: #48bb78;
      color: #ffffff;
    }

    .game-button.start:hover {
      background: #38a169;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(72, 187, 120, 0.4);
    }

    .game-button.reset {
      background: #ed8936;
      color: #ffffff;
    }

    .game-button.reset:hover {
      background: #dd6b20;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(237, 137, 54, 0.4);
    }

    .game-button.reverse {
      background: #667eea;
      color: #ffffff;
    }

    .game-button.reverse:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .game-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .catch-effect {
      position: absolute;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 4px solid #48bb78;
      pointer-events: none;
      animation: catchRipple 0.6s ease-out;
    }

    @keyframes catchRipple {
      0% {
        transform: translate(-50%, -50%) scale(0.5);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, -50%) scale(2);
        opacity: 0;
      }
    }

    .score-popup {
      position: absolute;
      font-size: 24px;
      font-weight: 800;
      color: #48bb78;
      pointer-events: none;
      animation: scoreFloat 1s ease-out;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    @keyframes scoreFloat {
      0% {
        transform: translateY(0);
        opacity: 1;
      }
      100% {
        transform: translateY(-60px);
        opacity: 0;
      }
    }

    .token-modal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 30px;
      border-radius: 16px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      z-index: 100;
      min-width: 300px;
      text-align: center;
    }

    .token-modal-backdrop {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 99;
    }

    .token-modal h3 {
      margin: 0 0 20px 0;
      color: #2d3748;
      font-size: 20px;
    }

    .token-input {
      width: 100%;
      padding: 12px;
      border: 2px solid #667eea;
      border-radius: 8px;
      font-size: 16px;
      margin-bottom: 15px;
      box-sizing: border-box;
      text-align: center;
      font-weight: 600;
      text-transform: uppercase;
    }

    .token-buttons {
      display: flex;
      gap: 10px;
    }

    .token-button {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      text-transform: uppercase;
    }

    .token-button.submit {
      background: #48bb78;
      color: white;
    }

    .token-button.submit:hover {
      background: #38a169;
    }

    .token-button.cancel {
      background: #f56565;
      color: white;
    }

    .token-button.cancel:hover {
      background: #e53e3e;
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px 10px;
      }

      .scene, .game-section {
        padding: 30px 20px;
      }

      .title {
        font-size: 24px;
        margin-bottom: 30px;
      }

      .main-bridge-container {
        flex-direction: column;
        gap: 80px;
        min-height: auto;
      }

      .bridge {
        display: none;
      }

      .data-packet {
        display: none;
      }

      .info-cards {
        margin-top: 0;
        grid-template-columns: 1fr;
      }

      .request-response {
        grid-template-columns: 1fr;
      }

      .cors-bridge-container {
        flex-direction: column;
        gap: 60px;
        min-height: auto;
      }

      .cors-bridge {
        display: none;
      }

      .preflight-shield {
        position: static;
        transform: none;
        margin: 20px auto;
      }

      .legend {
        gap: 15px;
      }

      .game-area {
        height: 300px;
      }

      .game-controls {
        flex-direction: column;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container"><!-- Game Section -->
   <div class="game-section">
    <h2 class="game-title" id="game-title">üéÆ Game Penyeberangan API</h2>
    <p class="game-instruction" id="game-instruction">Bantu orang menyeberang dari Indomaret ke Universitas Nusa Mandiri! Klik orang untuk memasukkan token. Token yang benar: UNM</p>
    <div class="game-stats">
     <div class="stat-box">
      <div class="stat-label">
       Skor
      </div>
      <div class="stat-value" id="score">
       0
      </div>
     </div>
     <div class="stat-box">
      <div class="stat-label">
       Waktu
      </div>
      <div class="stat-value" id="timer">
       45
      </div>
     </div>
     <div class="stat-box">
      <div class="stat-label">
       Menyeberang
      </div>
      <div class="stat-value" id="caught">
       0
      </div>
     </div>
    </div>
    <div class="game-area" id="gameArea">
     <div class="game-building left">
      <div class="building-structure">
       <div class="building-windows">
        <div class="building-window"></div>
        <div class="building-window"></div>
        <div class="building-window"></div>
        <div class="building-window"></div>
        <div class="building-window"></div>
        <div class="building-window"></div>
       </div>
       <div class="building-label">
        Universitas<br>
        Nusa Mandiri
       </div>
      </div>
     </div>
     <div class="game-bridge">
      <div class="bridge-rail"></div>
     </div>
     <div class="security-guard">
      üíÇ
     </div>
     <div class="game-building right">
      <div class="building-structure indomaret">
       <div class="building-windows">
        <div class="building-window"></div>
        <div class="building-window"></div>
        <div class="building-window"></div>
        <div class="building-window"></div>
        <div class="building-window"></div>
        <div class="building-window"></div>
       </div>
       <div class="building-label">
        Indomaret
       </div>
      </div>
     </div>
    </div>
    <div class="game-controls"><button class="game-button start" id="startButton">Mulai Game</button> <button class="game-button reset" id="resetButton">Reset</button> <button class="game-button reverse" id="reverseButton">üîÑ Balik Arah</button>
    </div>
    <div class="legend" style="margin-top: 30px;">
     <div class="legend-item">
      <div style="font-size: 24px;">
       üö∂ÔøΩÔøΩÔøΩÔøΩ‚ôÇÔ∏è
      </div>
      <div class="legend-text">
       Klik orang untuk input token
      </div>
     </div>
     <div class="legend-item">
      <div style="font-size: 24px;">
       üòä
      </div>
      <div class="legend-text">
       Token benar (UNM) = 15 poin
      </div>
     </div>
     <div class="legend-item">
      <div style="font-size: 24px;">
       ÔøΩÔøΩÔøΩÔøΩÔøΩ
      </div>
      <div class="legend-text">
       Token salah = Balik ke Indomaret
      </div>
     </div>
     <div class="legend-item">
      <div style="font-size: 24px;">
       üíÇ
      </div>
      <div class="legend-text">
       Satpam = Security/CORS
      </div>
     </div>
    </div>
   </div><!-- Educational Section -->
   <div class="scene">
    <h1 class="title" id="main-title">Jembatan Komunikasi API</h1>
    <div class="main-bridge-container">
     <div class="island">
      <div class="island-title" id="left-island-title">
       Frontend
      </div>
      <div class="island-subtitle" id="left-island-subtitle">
       Portal Mahasiswa / React App
      </div>
     </div>
     <div class="bridge">
      <div class="data-packet get"></div>
      <div class="data-packet post"></div>
      <div class="data-packet put"></div>
      <div class="data-packet delete"></div>
     </div>
     <div class="island">
      <div class="island-title" id="right-island-title">
       Backend
      </div>
      <div class="island-subtitle" id="right-island-subtitle">
       Sistem Akademik / REST API
      </div>
     </div>
    </div>
    <div class="info-cards">
     <div class="info-card">
      <div class="info-card-title">
       Endpoint
      </div>
      <div class="info-card-content">
       /mahasiswa
      </div>
     </div>
     <div class="info-card">
      <div class="info-card-title">
       Metode HTTP
      </div>
      <div class="info-card-content"><span class="method-tag get">GET</span> <span class="method-tag post">POST</span> <span class="method-tag put">PUT</span> <span class="method-tag delete">DELETE</span>
      </div>
     </div>
     <div class="info-card">
      <div class="info-card-title">
       Header
      </div>
      <div class="info-card-content">
       Content-Type:<br>
       application/json
      </div>
     </div>
     <div class="info-card">
      <div class="info-card-title">
       Body
      </div>
      <div class="info-card-content">
       Data JSON
      </div>
     </div>
    </div>
    <div class="request-response">
     <div class="code-card">
      <div class="code-header">
       üì§ HTTP Request
      </div>
      <div class="code-content" id="request-content">
       GET <span id="api-url-display">https://api.kampus.ac.id/mahasiswa/1</span> Headers: <span class="code-key">Content-Type</span>: <span class="code-string">"application/json"</span> <span class="code-key">Authorization</span>: <span class="code-string">"Bearer token123"</span>
      </div>
     </div>
     <div class="code-card">
      <div class="code-header">
       üì• Respons JSON
      </div>
      <div class="code-content">
       { <span class="code-key">"id"</span>: <span class="code-value">1</span>, <span class="code-key">"nama"</span>: <span class="code-string">"Ahmad Fauzi"</span>, <span class="code-key">"nim"</span>: <span class="code-string">"2021001"</span>, <span class="code-key">"prodi"</span>: <span class="code-string">"Teknik Informatika"</span> }
      </div>
     </div>
    </div>
    <div class="cors-section">
     <h2 class="cors-title">üîí CORS (Cross-Origin Resource Sharing)</h2>
     <div class="cors-bridge-container">
      <div class="cors-island">
       <div class="cors-label">
        Frontend
       </div>
       <div class="cors-url">
        http://localhost:3000
       </div>
      </div>
      <div class="cors-bridge"></div>
      <div class="preflight-shield">
       üõ°Ô∏è
      </div>
      <div class="cors-island">
       <div class="cors-label">
        Server API
       </div>
       <div class="cors-url">
        https://api.kampus.ac.id
       </div>
      </div>
     </div>
     <div style="text-align: center; color: #4a5568; font-size: 14px; margin-bottom: 20px;">
      ‚ö° Preflight OPTIONS Request memvalidasi akses lintas origin
     </div>
     <div class="security-headers">
      <div class="security-badge">
       Access-Control-Allow-Origin: *
      </div>
      <div class="security-badge">
       Token Authorization
      </div>
      <div class="security-badge">
       Cross-Origin Request
      </div>
     </div>
    </div>
    <div class="legend">
     <div class="legend-item">
      <div class="legend-dot" style="background: #4299e1; color: #4299e1;"></div>
      <div class="legend-text">
       Request GET
      </div>
     </div>
     <div class="legend-item">
      <div class="legend-dot" style="background: #48bb78; color: #48bb78;"></div>
      <div class="legend-text">
       Request POST
      </div>
     </div>
     <div class="legend-item">
      <div class="legend-dot" style="background: #ecc94b; color: #ecc94b;"></div>
      <div class="legend-text">
       Request PUT
      </div>
     </div>
     <div class="legend-item">
      <div class="legend-dot" style="background: #f56565; color: #f56565;"></div>
      <div class="legend-text">
       Request DELETE
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Game Logic
    let gameActive = false;
    let score = 0;
    let crossed = 0;
    let blocked = 0;
    let timeLeft = 45;
    let timerInterval;
    let spawnInterval;
    let persons = [];
    let currentModalPerson = null;
    let isReversed = false; // false = Indomaret ke UNM, true = UNM ke Indomaret

    const personTypes = [
      { emoji: 'üö∂‚Äç‚ôÇÔ∏è', points: 15 },
      { emoji: 'üö∂‚Äç‚ôÄÔ∏è', points: 15 },
      { emoji: 'üßë', points: 15 },
      { emoji: 'üë®', points: 15 }
    ];

    const CORRECT_TOKEN = 'UNM';

    function startGame() {
      if (gameActive) return;
      
      gameActive = true;
      score = 0;
      crossed = 0;
      blocked = 0;
      timeLeft = 45;
      persons = [];
      
      updateStats();
      document.getElementById('startButton').disabled = true;
      
      const existingPersons = document.querySelectorAll('.game-person');
      existingPersons.forEach(p => p.remove());
      
      // Spawn orang pertama
      spawnPerson();
      
      timerInterval = setInterval(() => {
        timeLeft--;
        updateStats();
        
        if (timeLeft <= 0) {
          endGame();
        }
      }, 1000);
    }

    function spawnPerson() {
      if (!gameActive) return;
      
      const gameArea = document.getElementById('gameArea');
      const person = document.createElement('div');
      const randomType = personTypes[Math.floor(Math.random() * personTypes.length)];
      
      const personId = Date.now() + Math.random();
      
      person.className = 'game-person';
      person.innerHTML = randomType.emoji;
      person.dataset.points = randomType.points;
      person.dataset.id = personId;
      person.dataset.moving = 'true';
      person.dataset.needsToken = 'false';
      
      // Posisi spawn tergantung arah
      const startX = isReversed ? 220 : gameArea.clientWidth - 220;
      person.style.left = startX + 'px';
      person.style.bottom = '75px';
      
      // Handler klik hanya untuk arah Indomaret ke UNM (butuh token)
      if (!isReversed) {
        person.addEventListener('click', () => handlePersonClick(person));
      }
      
      gameArea.appendChild(person);
      persons.push({ element: person, id: personId, points: randomType.points, emoji: randomType.emoji });
      
      movePerson(person);
    }

    function movePerson(person, returnToStart = false) {
      if (!person.parentElement) return;
      
      const gameArea = document.getElementById('gameArea');
      let startX, targetX, stopX;
      
      if (returnToStart) {
        // Kembali ke posisi awal
        startX = isReversed ? gameArea.clientWidth - 220 : 220;
        targetX = isReversed ? 220 : gameArea.clientWidth - 220;
      } else {
        // Gerakan normal
        startX = isReversed ? 220 : gameArea.clientWidth - 220;
        targetX = isReversed ? gameArea.clientWidth - 220 : 220;
        
        // Jika dari Indomaret ke UNM (!isReversed), harus berhenti di tengah untuk token
        if (!isReversed && person.dataset.needsToken === 'false') {
          stopX = gameArea.clientWidth / 2 - 40; // Berhenti sebelum satpam
        }
      }
      
      const duration = 4000;
      const startTime = Date.now();
      
      const animation = setInterval(() => {
        if (!gameActive || !person.parentElement || person.dataset.moving === 'paused') {
          clearInterval(animation);
          return;
        }
        
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        let currentX = startX + (targetX - startX) * progress;
        
        // Cek apakah harus berhenti di tengah untuk token
        if (stopX !== undefined && !returnToStart && person.dataset.needsToken === 'false') {
          if ((startX > targetX && currentX <= stopX) || (startX < targetX && currentX >= stopX)) {
            person.style.left = stopX + 'px';
            clearInterval(animation);
            person.dataset.moving = 'paused';
            
            // Otomatis tampilkan modal token setelah berhenti
            setTimeout(() => {
              if (person.parentElement && gameActive) {
                handlePersonClick(person);
              }
            }, 300);
            return;
          }
        }
        
        person.style.left = currentX + 'px';
        
        if (progress >= 1) {
          clearInterval(animation);
          if (person.parentElement) {
            // Jika dari UNM ke Indomaret (isReversed), langsung dapat poin
            if (isReversed && !returnToStart) {
              score += parseInt(person.dataset.points);
              crossed++;
              updateStats();
            }
            person.remove();
            const index = persons.findIndex(p => p.element === person);
            if (index > -1) persons.splice(index, 1);
            
            // Spawn orang baru jika game masih aktif dan bukan gerakan balik
            if (gameActive && !returnToStart) {
              setTimeout(() => {
                if (gameActive) spawnPerson();
              }, 500);
            }
          }
        }
      }, 16);
    }

    function handlePersonClick(person) {
      if (!gameActive || !person.parentElement || currentModalPerson) return;
      
      // Hanya tampilkan modal jika dari Indomaret ke UNM
      if (isReversed) return;
      
      person.dataset.moving = 'paused';
      currentModalPerson = person;
      
      showTokenModal(person);
    }

    function showTokenModal(person) {
      const gameArea = document.getElementById('gameArea');
      
      const backdrop = document.createElement('div');
      backdrop.className = 'token-modal-backdrop';
      backdrop.id = 'tokenBackdrop';
      
      const modal = document.createElement('div');
      modal.className = 'token-modal';
      modal.id = 'tokenModal';
      modal.innerHTML = `
        <h3>üîê Masukkan Token API</h3>
        <input type="text" class="token-input" id="tokenInput" placeholder="Masukkan token..." maxlength="10">
        <div class="token-buttons">
          <button class="token-button submit" id="submitToken">Kirim</button>
          <button class="token-button cancel" id="cancelToken">Batal</button>
        </div>
      `;
      
      gameArea.appendChild(backdrop);
      gameArea.appendChild(modal);
      
      const input = document.getElementById('tokenInput');
      input.focus();
      
      document.getElementById('submitToken').addEventListener('click', () => validateToken(person));
      document.getElementById('cancelToken').addEventListener('click', () => closeModal(person, false));
      
      input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          validateToken(person);
        }
      });
    }

    function validateToken(person) {
      const input = document.getElementById('tokenInput');
      const token = input.value.trim().toUpperCase();
      
      closeModal(person, token === CORRECT_TOKEN);
    }

    function closeModal(person, isCorrect) {
      const modal = document.getElementById('tokenModal');
      const backdrop = document.getElementById('tokenBackdrop');
      
      if (modal) modal.remove();
      if (backdrop) backdrop.remove();
      
      currentModalPerson = null;
      
      if (!person.parentElement) return;
      
      const rect = person.getBoundingClientRect();
      const gameRect = document.getElementById('gameArea').getBoundingClientRect();
      
      if (isCorrect) {
        const personData = persons.find(p => p.element === person);
        
        person.innerHTML = 'üòä';
        score += parseInt(person.dataset.points);
        crossed++;
        
        const scorePopup = document.createElement('div');
        scorePopup.className = 'score-popup';
        scorePopup.textContent = `+${person.dataset.points} Token Valid! ‚úÖ`;
        scorePopup.style.left = (rect.left - gameRect.left + 20) + 'px';
        scorePopup.style.top = (rect.top - gameRect.top) + 'px';
        document.getElementById('gameArea').appendChild(scorePopup);
        
        setTimeout(() => scorePopup.remove(), 1000);
        
        // Token valid - lanjutkan ke depan (ke kampus UNM)
        person.dataset.moving = 'true';
        person.dataset.needsToken = 'true'; // Sudah punya token, tidak berhenti lagi
        continueToDestination(person);
      } else {
        blocked++;
        
        person.classList.add('blocked');
        
        const blockPopup = document.createElement('div');
        blockPopup.className = 'score-popup';
        blockPopup.style.color = '#f56565';
        blockPopup.textContent = isCorrect === false ? `Token Salah! üö´` : `Dibatalkan! üö´`;
        blockPopup.style.left = (rect.left - gameRect.left + 20) + 'px';
        blockPopup.style.top = (rect.top - gameRect.top) + 'px';
        document.getElementById('gameArea').appendChild(blockPopup);
        
        setTimeout(() => {
          blockPopup.remove();
          person.classList.remove('blocked');
        }, 1000);
        
        // Token tidak valid - kembali mundur ke Indomaret
        person.dataset.moving = 'true';
        returnToStart(person);
      }
      
      updateStats();
    }

    function continueToDestination(person) {
      if (!person.parentElement) return;
      
      const gameArea = document.getElementById('gameArea');
      const startX = parseFloat(person.style.left);
      const targetX = 220; // Ke kampus UNM (kiri)
      
      const duration = 3000;
      const startTime = Date.now();
      
      const animation = setInterval(() => {
        if (!gameActive || !person.parentElement || person.dataset.moving === 'paused') {
          clearInterval(animation);
          return;
        }
        
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const currentX = startX + (targetX - startX) * progress;
        
        person.style.left = currentX + 'px';
        
        if (progress >= 1) {
          clearInterval(animation);
          if (person.parentElement) {
            person.remove();
            const index = persons.findIndex(p => p.element === person);
            if (index > -1) persons.splice(index, 1);
            
            // Spawn orang baru setelah berhasil sampai
            setTimeout(() => {
              if (gameActive) spawnPerson();
            }, 500);
          }
        }
      }, 16);
    }

    function returnToStart(person) {
      if (!person.parentElement) return;
      
      const gameArea = document.getElementById('gameArea');
      const startX = parseFloat(person.style.left);
      const targetX = gameArea.clientWidth - 220; // Kembali ke Indomaret (kanan)
      
      const duration = 3000;
      const startTime = Date.now();
      
      const animation = setInterval(() => {
        if (!gameActive || !person.parentElement) {
          clearInterval(animation);
          return;
        }
        
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const currentX = startX + (targetX - startX) * progress;
        
        person.style.left = currentX + 'px';
        
        if (progress >= 1) {
          clearInterval(animation);
          if (person.parentElement) {
            person.remove();
            const index = persons.findIndex(p => p.element === person);
            if (index > -1) persons.splice(index, 1);
            
            // Spawn orang baru setelah ditolak
            setTimeout(() => {
              if (gameActive) spawnPerson();
            }, 500);
          }
        }
      }, 16);
    }

    function endGame() {
      gameActive = false;
      clearInterval(timerInterval);
      
      document.getElementById('startButton').disabled = false;
      
      persons.forEach(p => {
        if (p.element.parentElement) {
          p.element.remove();
        }
      });
      persons = [];
      
      const gameArea = document.getElementById('gameArea');
      const resultDiv = document.createElement('div');
      resultDiv.style.cssText = 'position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.95); padding: 40px; border-radius: 20px; text-align: center; z-index: 20; box-shadow: 0 10px 30px rgba(0,0,0,0.3);';
      resultDiv.innerHTML = `
        <div style="font-size: 48px; margin-bottom: 20px;">üéâ</div>
        <div style="font-size: 32px; font-weight: 800; color: #2d3748; margin-bottom: 10px;">Game Selesai!</div>
        <div style="font-size: 24px; color: #667eea; margin-bottom: 10px;">Skor Akhir: ${score}</div>
        <div style="font-size: 18px; color: #48bb78; margin-bottom: 5px;">‚úÖ Berhasil Menyeberang: ${crossed}</div>
        <div style="font-size: 18px; color: #f56565;">üö´ Ditolak Satpam: ${blocked}</div>
      `;
      gameArea.appendChild(resultDiv);
    }

    function resetGame() {
      gameActive = false;
      clearInterval(timerInterval);
      
      score = 0;
      crossed = 0;
      blocked = 0;
      timeLeft = 45;
      isReversed = false;
      
      persons.forEach(p => {
        if (p.element.parentElement) {
          p.element.remove();
        }
      });
      persons = [];
      
      const resultDiv = document.querySelector('.game-area > div[style*="z-index: 20"]');
      if (resultDiv) resultDiv.remove();
      
      const modal = document.getElementById('tokenModal');
      const backdrop = document.getElementById('tokenBackdrop');
      if (modal) modal.remove();
      if (backdrop) backdrop.remove();
      
      currentModalPerson = null;
      
      document.getElementById('reverseButton').textContent = 'üîÑ Balik Arah';
      document.getElementById('game-instruction').textContent = 'Bantu orang menyeberang dari Indomaret ke Universitas Nusa Mandiri! Klik orang untuk memasukkan token. Token yang benar: UNM';
      
      updateStats();
      document.getElementById('startButton').disabled = false;
    }

    function updateStats() {
      document.getElementById('score').textContent = score;
      document.getElementById('timer').textContent = timeLeft;
      document.getElementById('caught').textContent = crossed;
    }

    function toggleReverse() {
      if (gameActive) return;
      
      isReversed = !isReversed;
      const reverseButton = document.getElementById('reverseButton');
      
      if (isReversed) {
        reverseButton.textContent = 'üîÑ Mode: UNM ‚Üí Indomaret';
        document.getElementById('game-instruction').textContent = 'Mode UNM ke Indomaret: Orang berjalan bebas tanpa token dan otomatis mendapat poin!';
      } else {
        reverseButton.textContent = 'üîÑ Balik Arah';
        document.getElementById('game-instruction').textContent = 'Bantu orang menyeberang dari Indomaret ke Universitas Nusa Mandiri! Klik orang untuk memasukkan token. Token yang benar: UNM';
      }
    }

    document.getElementById('startButton').addEventListener('click', startGame);
    document.getElementById('resetButton').addEventListener('click', resetGame);
    document.getElementById('reverseButton').addEventListener('click', toggleReverse);

    // Element SDK Configuration
    const defaultConfig = {
      background_color: "#667eea",
      surface_color: "#ffffff",
      text_color: "#2d3748",
      primary_action_color: "#4299e1",
      secondary_action_color: "#48bb78",
      font_family: "Inter",
      font_size: 16,
      left_island_title: "Frontend",
      left_island_subtitle: "Portal Mahasiswa / React App",
      right_island_title: "Backend",
      right_island_subtitle: "Sistem Akademik / REST API",
      api_url: "https://api.kampus.ac.id/mahasiswa/1",
      game_title: "üéÆ Game Penyeberangan API",
      game_instruction: "Bantu orang menyeberang dari Indomaret ke Universitas Nusa Mandiri! Klik orang untuk memasukkan token. Token yang benar: UNM"
    };

    async function onConfigChange(config) {
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;
      const fontFamily = config.font_family || defaultConfig.font_family;
      const fontSize = config.font_size || defaultConfig.font_size;

      document.body.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${backgroundColor}dd 100%)`;
      
      document.querySelectorAll('.scene, .game-section').forEach(el => {
        el.style.background = `${surfaceColor}f2`;
      });
      
      document.querySelectorAll('.title, .game-title, .cors-title').forEach(el => {
        el.style.color = textColor;
        el.style.fontFamily = `${fontFamily}, 'Segoe UI', system-ui, -apple-system, sans-serif`;
      });
      
      document.querySelector('.title').style.fontSize = `${fontSize * 2.25}px`;
      document.querySelector('.game-title').style.fontSize = `${fontSize * 2}px`;
      document.querySelector('.cors-title').style.fontSize = `${fontSize * 1.75}px`;

      document.querySelectorAll('.island').forEach(island => {
        island.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${backgroundColor}dd 100%)`;
      });

      document.querySelectorAll('.stat-box').forEach(box => {
        box.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${backgroundColor}dd 100%)`;
      });

      document.querySelectorAll('.island-title, .island-subtitle, .stat-label, .stat-value').forEach(el => {
        el.style.fontFamily = `${fontFamily}, 'Segoe UI', system-ui, -apple-system, sans-serif`;
      });

      document.querySelector('.bridge').style.background = `linear-gradient(90deg, ${primaryColor} 0%, ${secondaryColor} 50%, ${backgroundColor}cc 100%)`;

      document.querySelectorAll('.info-card').forEach(card => {
        card.style.background = surfaceColor;
        card.style.borderLeftColor = backgroundColor;
      });

      document.querySelectorAll('.info-card-title').forEach(title => {
        title.style.color = backgroundColor;
        title.style.fontFamily = `${fontFamily}, 'Segoe UI', system-ui, -apple-system, sans-serif`;
      });

      document.querySelectorAll('.code-card').forEach(card => {
        card.style.background = textColor;
      });

      document.querySelectorAll('.cors-island').forEach(island => {
        island.style.background = surfaceColor;
        island.style.borderColor = backgroundColor;
      });

      document.querySelectorAll('.cors-label').forEach(label => {
        label.style.color = backgroundColor;
      });

      document.querySelectorAll('.security-badge').forEach(badge => {
        badge.style.background = surfaceColor;
        badge.style.borderColor = backgroundColor;
        badge.style.color = backgroundColor;
      });

      document.querySelector('.game-button.start').style.background = secondaryColor;
      document.querySelector('.game-button.reset').style.background = primaryColor;

      document.getElementById('left-island-title').textContent = config.left_island_title || defaultConfig.left_island_title;
      document.getElementById('left-island-subtitle').textContent = config.left_island_subtitle || defaultConfig.left_island_subtitle;
      document.getElementById('right-island-title').textContent = config.right_island_title || defaultConfig.right_island_title;
      document.getElementById('right-island-subtitle').textContent = config.right_island_subtitle || defaultConfig.right_island_subtitle;
      document.getElementById('api-url-display').textContent = config.api_url || defaultConfig.api_url;
      document.getElementById('game-title').textContent = config.game_title || defaultConfig.game_title;
      document.getElementById('game-instruction').textContent = config.game_instruction || defaultConfig.game_instruction;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              window.elementSdk.setConfig({ surface_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              config.primary_action_color = value;
              window.elementSdk.setConfig({ primary_action_color: value });
            }
          },
          {
            get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              config.secondary_action_color = value;
              window.elementSdk.setConfig({ secondary_action_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            window.elementSdk.setConfig({ font_size: value });
          }
        }
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["left_island_title", config.left_island_title || defaultConfig.left_island_title],
        ["left_island_subtitle", config.left_island_subtitle || defaultConfig.left_island_subtitle],
        ["right_island_title", config.right_island_title || defaultConfig.right_island_title],
        ["right_island_subtitle", config.right_island_subtitle || defaultConfig.right_island_subtitle],
        ["api_url", config.api_url || defaultConfig.api_url],
        ["game_title", config.game_title || defaultConfig.game_title],
        ["game_instruction", config.game_instruction || defaultConfig.game_instruction]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a1c569133262ce1',t:'MTc2MzY4Nzc0OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
